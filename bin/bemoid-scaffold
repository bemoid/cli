#!/usr/bin/env node

const prompt = require('cli-prompt')
const exists = require('fs').existsSync
const rm = require('rimraf').sync
const path = require('path')
const chalk = require('chalk')
const inquirer = require('inquirer')
const home = require('user-home')
const program = require('commander')

const generate = require('../lib/generate')

program.usage('<template-name>')

program.on('--help', function () {
  console.log()
  console.log('  Examples:')
  console.log()
  console.log(chalk.gray('    # Scaffold boilerplate files based on SCSS syntax'))
  console.log('    $ bemoid scaffold scss')
  console.log()
})

function help () {
  program.parse(process.argv)
  if (program.args.length < 1) return program.help()
}
help()

var template = program.args[0]
var rawName = program.args[1]
var to = path.resolve(rawName || '.')
var tmp = path.join(home, '.bemoid-templates', template.replace(/\//g, '-'))

run()

function run() {
  generate({
    template: `bemoid/scaffold-${template}`,
    from: tmp,
    to: to
  }, function (err) {
    if (err) throw err.message;
  })
}